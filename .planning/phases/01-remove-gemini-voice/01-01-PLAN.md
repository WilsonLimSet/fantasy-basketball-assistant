---
phase: 01-remove-gemini-voice
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/lib/geminiVoice.ts, src/app/api/test-voice/route.ts, src/app/api/refresh/route.ts, src/lib/telegram.ts]
autonomous: true
---

<objective>
Remove all Gemini voice integration code from the codebase.

Purpose: User doesn't want voice briefings - text alerts are sufficient. Removing this reduces complexity and eliminates unused dependencies.
Output: Cleaner codebase with no Gemini/voice references.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/lib/geminiVoice.ts
@src/app/api/test-voice/route.ts
@src/app/api/refresh/route.ts
@src/lib/telegram.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete Gemini voice files</name>
  <files>src/lib/geminiVoice.ts, src/app/api/test-voice/</files>
  <action>
    Delete the following files/directories:
    - `src/lib/geminiVoice.ts` - entire file (250 lines of unused voice generation)
    - `src/app/api/test-voice/` - entire directory (test endpoint for voice feature)
  </action>
  <verify>
    - `ls src/lib/geminiVoice.ts` returns "No such file"
    - `ls src/app/api/test-voice/` returns "No such file or directory"
  </verify>
  <done>Both files/directories deleted</done>
</task>

<task type="auto">
  <name>Task 2: Clean up refresh route</name>
  <files>src/app/api/refresh/route.ts</files>
  <action>
    Remove voice-related code from refresh route:
    1. Remove import: `import { generateVoiceBriefing } from '@/lib/geminiVoice';`
    2. Remove import: `sendTelegramVoice` from telegram import
    3. Remove the `voiceSent` variable declaration
    4. Remove the entire voice briefing block (~lines 141-153):
       - `const enableVoice = process.env.ENABLE_VOICE_BRIEFING...`
       - The try-catch block for voice generation
    5. Remove `voiceSent` from any response objects if present

    Keep all other refresh logic intact - ESPN fetching, snapshot diff, text alerts.
  </action>
  <verify>
    - `grep -n "voice\|Voice\|gemini\|Gemini" src/app/api/refresh/route.ts` returns nothing
    - `npm run build` succeeds (no import errors)
  </verify>
  <done>Refresh route has no voice-related code</done>
</task>

<task type="auto">
  <name>Task 3: Remove sendTelegramVoice function</name>
  <files>src/lib/telegram.ts</files>
  <action>
    Remove the `sendTelegramVoice` function from telegram.ts:
    1. Find and delete the entire `sendTelegramVoice` function (starts around line 310)
    2. Remove any JSDoc comment above it
    3. Remove it from exports if exported separately

    Keep all other Telegram functions intact (sendTelegramMessage, sendSmartAlerts, etc.)
  </action>
  <verify>
    - `grep -n "sendTelegramVoice\|voice\|Voice" src/lib/telegram.ts` returns nothing
    - `npm run build` succeeds
  </verify>
  <done>Telegram module has no voice-related code</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] No references to gemini, voice, Voice, GEMINI, ENABLE_VOICE in src/
- [ ] `/api/refresh` endpoint still works (text alerts only)
</verification>

<success_criteria>
- All voice-related files deleted
- All voice-related imports removed
- All voice-related code blocks removed
- Build passes with no errors
- Codebase is cleaner and simpler
</success_criteria>

<output>
After completion, create `.planning/phases/01-remove-gemini-voice/01-01-SUMMARY.md`
</output>
