---
phase: 03-return-from-injury-alerts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/types/index.ts, src/lib/smartAlerts.ts]
autonomous: true
---

<objective>
Add dedicated TEAMMATE_RETURN alert type and verify all return scenarios work correctly.

Purpose: Return alerts currently reuse TEAMMATE_INJURY type which is confusing. Add proper type for clarity.
Output: Cleaner alert types, verified return-from-injury logic.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/types/index.ts
@src/lib/smartAlerts.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TEAMMATE_RETURN alert type</name>
  <files>src/types/index.ts</files>
  <action>
    In the SmartAlertType union (around line 251-257), add TEAMMATE_RETURN:

    ```typescript
    export type SmartAlertType =
      | 'ROSTER_INJURY'           // Your player got injured
      | 'ROSTER_RETURN'           // Your player returned from injury
      | 'TEAMMATE_INJURY'         // Key teammate of your player is out (usage boost)
      | 'TEAMMATE_RETURN'         // Key teammate of your player is back (usage threat)
      | 'WATCHLIST_OPPORTUNITY'   // Key teammate of watchlist player is out
      | 'HOT_WAIVER_ADD'          // High-value waiver add available
      | 'WEEKLY_SUMMARY';         // Periodic summary
    ```

    This makes return alerts distinct from injury alerts.
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>TEAMMATE_RETURN type exists in SmartAlertType union</done>
</task>

<task type="auto">
  <name>Task 2: Use TEAMMATE_RETURN type for return alerts</name>
  <files>src/lib/smartAlerts.ts</files>
  <action>
    In the `if (returned)` block (around lines 424-461), change the alert type from 'TEAMMATE_INJURY' to 'TEAMMATE_RETURN':

    Find this line (around line 432):
    ```typescript
    type: 'TEAMMATE_INJURY', // reusing type
    ```

    Change to:
    ```typescript
    type: 'TEAMMATE_RETURN',
    ```

    Remove the "// reusing type" comment since we're not reusing anymore.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` succeeds
    - `grep "TEAMMATE_RETURN" src/lib/smartAlerts.ts` returns a match
  </verify>
  <done>Return alerts use dedicated TEAMMATE_RETURN type</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] `npx tsc --noEmit` passes
- [ ] TEAMMATE_RETURN type exists and is used for teammate return alerts
- [ ] Return alert scenarios verified:
  - Your player returns → ROSTER_RETURN
  - Teammate returns (threat) → TEAMMATE_RETURN
  - Watchlist teammate returns → WATCHLIST_OPPORTUNITY
</verification>

<success_criteria>
- TEAMMATE_RETURN type added to SmartAlertType
- Return alerts use proper type (not reusing TEAMMATE_INJURY)
- All return scenarios have correct alert types
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/03-return-from-injury-alerts/03-01-SUMMARY.md`
</output>
